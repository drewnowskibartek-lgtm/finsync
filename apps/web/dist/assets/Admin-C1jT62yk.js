import{i as we,k as je,r as n,m as ye,_ as fe,n as f,j as o,f as U,o as Z,p as Ce,s as P,q as ve,t as Ve,v as ut,w as Ye,x as Ge,y as qe,z as Se,A as ht,D as Me,E as pt,u as bt,B as Te,T as G,c as z,h as E,d as oe,C as le,b as re}from"./index-BWONGnEN.js";import{M as D}from"./MenuItem-DJikRv8z.js";import{S as ft,K as xt,a as mt,D as be}from"./DataGrid-DTzFwfqR.js";import{G as v}from"./Grid-BBssZsKo.js";import"./index-BRuYprat.js";import"./LinearProgress-B2NhPfo-.js";let ce;function Ze(){if(ce)return ce;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),ce="reverse",e.scrollLeft>0?ce="default":(e.scrollLeft=1,e.scrollLeft===0&&(ce="negative")),document.body.removeChild(e),ce}function vt(e,t){const a=e.scrollLeft;if(t!=="rtl")return a;switch(Ze()){case"negative":return e.scrollWidth-e.clientWidth+a;case"reverse":return e.scrollWidth-e.clientWidth-a;default:return a}}function gt(e){return we("MuiSwitch",e)}const I=je("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),St=["className","color","edge","size","sx"],wt=e=>{const{classes:t,edge:a,size:c,color:d,checked:u,disabled:x}=e,m={root:["root",a&&`edge${Z(a)}`,`size${Z(c)}`],switchBase:["switchBase",`color${Z(d)}`,u&&"checked",x&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},b=Ce(m,gt,t);return f({},t,b)},jt=P("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${Z(a.edge)}`],t[`size${Z(a.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${I.thumb}`]:{width:16,height:16},[`& .${I.switchBase}`]:{padding:4,[`&.${I.checked}`]:{transform:"translateX(16px)"}}}}]}),yt=P(ft,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${I.input}`]:t.input},a.color!=="default"&&t[`color${Z(a.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${I.checked}`]:{transform:"translateX(20px)"},[`&.${I.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${I.checked} + .${I.track}`]:{opacity:.5},[`&.${I.disabled} + .${I.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${I.input}`]:{left:"-100%",width:"300%"}}),({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ve.alpha(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(([,t])=>t.main&&t.light).map(([t])=>({props:{color:t},style:{[`&.${I.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ve.alpha(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?ve.lighten(e.palette[t].main,.62):ve.darken(e.palette[t].main,.55)}`}},[`&.${I.checked} + .${I.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]})),Ct=P("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),kt=P("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Bt=n.forwardRef(function(t,a){const c=ye({props:t,name:"MuiSwitch"}),{className:d,color:u="primary",edge:x=!1,size:m="medium",sx:b}=c,C=fe(c,St),w=f({},c,{color:u,edge:x,size:m}),g=wt(w),S=o.jsx(kt,{className:g.thumb,ownerState:w});return o.jsxs(jt,{className:U(g.root,d),sx:b,ownerState:w,children:[o.jsx(yt,f({type:"checkbox",icon:S,checkedIcon:S,ref:a,ownerState:w},C,{classes:f({},g,{root:g.switchBase})})),o.jsx(Ct,{className:g.track,ownerState:w})]})});function zt(e){return we("MuiTab",e)}const q=je("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),It=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Mt=e=>{const{classes:t,textColor:a,fullWidth:c,wrapped:d,icon:u,label:x,selected:m,disabled:b}=e,C={root:["root",u&&x&&"labelIcon",`textColor${Z(a)}`,c&&"fullWidth",d&&"wrapped",m&&"selected",b&&"disabled"],iconWrapper:["iconWrapper"]};return Ce(C,zt,t)},Tt=P(Ve,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.label&&a.icon&&t.labelIcon,t[`textColor${Z(a.textColor)}`],a.fullWidth&&t.fullWidth,a.wrapped&&t.wrapped,{[`& .${q.iconWrapper}`]:t.iconWrapper}]}})(({theme:e,ownerState:t})=>f({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${q.iconWrapper}`]:f({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${q.selected}`]:{opacity:1},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${q.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${q.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${q.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${q.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),ae=n.forwardRef(function(t,a){const c=ye({props:t,name:"MuiTab"}),{className:d,disabled:u=!1,disableFocusRipple:x=!1,fullWidth:m,icon:b,iconPosition:C="top",indicator:w,label:g,onChange:S,onClick:T,onFocus:F,selected:W,selectionFollowsFocus:M,textColor:H="inherit",value:j,wrapped:R=!1}=c,L=fe(c,It),X=f({},c,{disabled:u,disableFocusRipple:x,selected:W,icon:!!b,iconPosition:C,label:!!g,fullWidth:m,textColor:H,wrapped:R}),_=Mt(X),k=b&&g&&n.isValidElement(b)?n.cloneElement(b,{className:U(_.iconWrapper,b.props.className)}):b,se=$=>{!W&&S&&S($,j),T&&T($)},K=$=>{M&&!W&&S&&S($,j),F&&F($)};return o.jsxs(Tt,f({focusRipple:!x,className:U(_.root,d),ref:a,role:"tab","aria-selected":W,disabled:u,onClick:se,onFocus:K,ownerState:X,tabIndex:W?0:-1},L,{children:[C==="top"||C==="start"?o.jsxs(n.Fragment,{children:[k,g]}):o.jsxs(n.Fragment,{children:[g,k]}),w]}))});function Rt(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Et(e,t,a,c={},d=()=>{}){const{ease:u=Rt,duration:x=300}=c;let m=null;const b=t[e];let C=!1;const w=()=>{C=!0},g=S=>{if(C){d(new Error("Animation cancelled"));return}m===null&&(m=S);const T=Math.min(1,(S-m)/x);if(t[e]=u(T)*(a-b)+b,T>=1){requestAnimationFrame(()=>{d(null)});return}requestAnimationFrame(g)};return b===a?(d(new Error("Element already at target position")),w):(requestAnimationFrame(g),w)}const Wt=["onChange"],Nt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function $t(e){const{onChange:t}=e,a=fe(e,Wt),c=n.useRef(),d=n.useRef(null),u=()=>{c.current=d.current.offsetHeight-d.current.clientHeight};return ut(()=>{const x=Ye(()=>{const b=c.current;u(),b!==c.current&&t(c.current)}),m=Ge(d.current);return m.addEventListener("resize",x),()=>{x.clear(),m.removeEventListener("resize",x)}},[t]),n.useEffect(()=>{u(),t(c.current)},[t]),o.jsx("div",f({style:Nt},a,{ref:d}))}function Pt(e){return we("MuiTabScrollButton",e)}const Lt=je("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),At=["className","slots","slotProps","direction","orientation","disabled"],Ft=e=>{const{classes:t,orientation:a,disabled:c}=e;return Ce({root:["root",a,c&&"disabled"]},Pt,t)},Ot=P(Ve,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.orientation&&t[a.orientation]]}})(({ownerState:e})=>f({width:40,flexShrink:0,opacity:.8,[`&.${Lt.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Dt=n.forwardRef(function(t,a){var c,d;const u=ye({props:t,name:"MuiTabScrollButton"}),{className:x,slots:m={},slotProps:b={},direction:C}=u,w=fe(u,At),g=qe(),S=f({isRtl:g},u),T=Ft(S),F=(c=m.StartScrollButtonIcon)!=null?c:xt,W=(d=m.EndScrollButtonIcon)!=null?d:mt,M=Se({elementType:F,externalSlotProps:b.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:S}),H=Se({elementType:W,externalSlotProps:b.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:S});return o.jsx(Ot,f({component:"div",className:U(T.root,x),ref:a,role:null,ownerState:S,tabIndex:null},w,{children:C==="left"?o.jsx(F,f({},M)):o.jsx(W,f({},H))}))});function Ut(e){return we("MuiTabs",e)}const Re=je("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Ht=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Xe=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,_e=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ge=(e,t,a)=>{let c=!1,d=a(e,t);for(;d;){if(d===e.firstChild){if(c)return;c=!0}const u=d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||u)d=a(e,d);else{d.focus();return}}},Xt=e=>{const{vertical:t,fixed:a,hideScrollbar:c,scrollableX:d,scrollableY:u,centered:x,scrollButtonsHideMobile:m,classes:b}=e;return Ce({root:["root",t&&"vertical"],scroller:["scroller",a&&"fixed",c&&"hideScrollbar",d&&"scrollableX",u&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",x&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",m&&"scrollButtonsHideMobile"],scrollableX:[d&&"scrollableX"],hideScrollbar:[c&&"hideScrollbar"]},Ut,b)},_t=P("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[{[`& .${Re.scrollButtons}`]:t.scrollButtons},{[`& .${Re.scrollButtons}`]:a.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,a.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>f({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Re.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),Kt=P("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.scroller,a.fixed&&t.fixed,a.hideScrollbar&&t.hideScrollbar,a.scrollableX&&t.scrollableX,a.scrollableY&&t.scrollableY]}})(({ownerState:e})=>f({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Vt=P("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.flexContainer,a.vertical&&t.flexContainerVertical,a.centered&&t.centered]}})(({ownerState:e})=>f({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),Yt=P("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>f({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),Gt=P($t)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Ke={},qt=n.forwardRef(function(t,a){const c=ye({props:t,name:"MuiTabs"}),d=ht(),u=qe(),{"aria-label":x,"aria-labelledby":m,action:b,centered:C=!1,children:w,className:g,component:S="div",allowScrollButtonsMobile:T=!1,indicatorColor:F="primary",onChange:W,orientation:M="horizontal",ScrollButtonComponent:H=Dt,scrollButtons:j="auto",selectionFollowsFocus:R,slots:L={},slotProps:X={},TabIndicatorProps:_={},TabScrollButtonProps:k={},textColor:se="primary",value:K,variant:$="standard",visibleScrollbar:de=!1}=c,ke=fe(c,Ht),N=$==="scrollable",l=M==="vertical",i=l?"scrollTop":"scrollLeft",ne=l?"top":"left",ie=l?"bottom":"right",ue=l?"clientHeight":"clientWidth",J=l?"height":"width",Q=f({},c,{component:S,allowScrollButtonsMobile:T,indicatorColor:F,orientation:M,vertical:l,scrollButtons:j,textColor:se,variant:$,visibleScrollbar:de,fixed:!N,hideScrollbar:N&&!de,scrollableX:N&&!l,scrollableY:N&&l,centered:C&&!N,scrollButtonsHideMobile:!T}),V=Xt(Q),Je=Se({elementType:L.StartScrollButtonIcon,externalSlotProps:X.startScrollButtonIcon,ownerState:Q}),Qe=Se({elementType:L.EndScrollButtonIcon,externalSlotProps:X.endScrollButtonIcon,ownerState:Q}),[Ee,et]=n.useState(!1),[ee,We]=n.useState(Ke),[Ne,tt]=n.useState(!1),[$e,ot]=n.useState(!1),[Pe,lt]=n.useState(!1),[Le,rt]=n.useState({overflow:"hidden",scrollbarWidth:0}),Ae=new Map,O=n.useRef(null),te=n.useRef(null),Fe=()=>{const r=O.current;let s;if(r){const h=r.getBoundingClientRect();s={clientWidth:r.clientWidth,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop,scrollLeftNormalized:vt(r,u?"rtl":"ltr"),scrollWidth:r.scrollWidth,top:h.top,bottom:h.bottom,left:h.left,right:h.right}}let p;if(r&&K!==!1){const h=te.current.children;if(h.length>0){const y=h[Ae.get(K)];p=y?y.getBoundingClientRect():null}}return{tabsMeta:s,tabMeta:p}},he=Me(()=>{const{tabsMeta:r,tabMeta:s}=Fe();let p=0,h;if(l)h="top",s&&r&&(p=s.top-r.top+r.scrollTop);else if(h=u?"right":"left",s&&r){const B=u?r.scrollLeftNormalized+r.clientWidth-r.scrollWidth:r.scrollLeft;p=(u?-1:1)*(s[h]-r[h]+B)}const y={[h]:p,[J]:s?s[J]:0};if(isNaN(ee[h])||isNaN(ee[J]))We(y);else{const B=Math.abs(ee[h]-y[h]),A=Math.abs(ee[J]-y[J]);(B>=1||A>=1)&&We(y)}}),Be=(r,{animation:s=!0}={})=>{s?Et(i,O.current,r,{duration:d.transitions.duration.standard}):O.current[i]=r},Oe=r=>{let s=O.current[i];l?s+=r:(s+=r*(u?-1:1),s*=u&&Ze()==="reverse"?-1:1),Be(s)},De=()=>{const r=O.current[ue];let s=0;const p=Array.from(te.current.children);for(let h=0;h<p.length;h+=1){const y=p[h];if(s+y[ue]>r){h===0&&(s=r);break}s+=y[ue]}return s},at=()=>{Oe(-1*De())},st=()=>{Oe(De())},nt=n.useCallback(r=>{rt({overflow:null,scrollbarWidth:r})},[]),it=()=>{const r={};r.scrollbarSizeListener=N?o.jsx(Gt,{onChange:nt,className:U(V.scrollableX,V.hideScrollbar)}):null;const p=N&&(j==="auto"&&(Ne||$e)||j===!0);return r.scrollButtonStart=p?o.jsx(H,f({slots:{StartScrollButtonIcon:L.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Je},orientation:M,direction:u?"right":"left",onClick:at,disabled:!Ne},k,{className:U(V.scrollButtons,k.className)})):null,r.scrollButtonEnd=p?o.jsx(H,f({slots:{EndScrollButtonIcon:L.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Qe},orientation:M,direction:u?"left":"right",onClick:st,disabled:!$e},k,{className:U(V.scrollButtons,k.className)})):null,r},Ue=Me(r=>{const{tabsMeta:s,tabMeta:p}=Fe();if(!(!p||!s)){if(p[ne]<s[ne]){const h=s[i]+(p[ne]-s[ne]);Be(h,{animation:r})}else if(p[ie]>s[ie]){const h=s[i]+(p[ie]-s[ie]);Be(h,{animation:r})}}}),xe=Me(()=>{N&&j!==!1&&lt(!Pe)});n.useEffect(()=>{const r=Ye(()=>{O.current&&he()});let s;const p=B=>{B.forEach(A=>{A.removedNodes.forEach(pe=>{var Y;(Y=s)==null||Y.unobserve(pe)}),A.addedNodes.forEach(pe=>{var Y;(Y=s)==null||Y.observe(pe)})}),r(),xe()},h=Ge(O.current);h.addEventListener("resize",r);let y;return typeof ResizeObserver<"u"&&(s=new ResizeObserver(r),Array.from(te.current.children).forEach(B=>{s.observe(B)})),typeof MutationObserver<"u"&&(y=new MutationObserver(p),y.observe(te.current,{childList:!0})),()=>{var B,A;r.clear(),h.removeEventListener("resize",r),(B=y)==null||B.disconnect(),(A=s)==null||A.disconnect()}},[he,xe]),n.useEffect(()=>{const r=Array.from(te.current.children),s=r.length;if(typeof IntersectionObserver<"u"&&s>0&&N&&j!==!1){const p=r[0],h=r[s-1],y={root:O.current,threshold:.99},B=Ie=>{tt(!Ie[0].isIntersecting)},A=new IntersectionObserver(B,y);A.observe(p);const pe=Ie=>{ot(!Ie[0].isIntersecting)},Y=new IntersectionObserver(pe,y);return Y.observe(h),()=>{A.disconnect(),Y.disconnect()}}},[N,j,Pe,w?.length]),n.useEffect(()=>{et(!0)},[]),n.useEffect(()=>{he()}),n.useEffect(()=>{Ue(Ke!==ee)},[Ue,ee]),n.useImperativeHandle(b,()=>({updateIndicator:he,updateScrollButtons:xe}),[he,xe]);const He=o.jsx(Yt,f({},_,{className:U(V.indicator,_.className),ownerState:Q,style:f({},ee,_.style)}));let me=0;const ct=n.Children.map(w,r=>{if(!n.isValidElement(r))return null;const s=r.props.value===void 0?me:r.props.value;Ae.set(s,me);const p=s===K;return me+=1,n.cloneElement(r,f({fullWidth:$==="fullWidth",indicator:p&&!Ee&&He,selected:p,selectionFollowsFocus:R,onChange:W,textColor:se,value:s},me===1&&K===!1&&!r.props.tabIndex?{tabIndex:0}:{}))}),dt=r=>{const s=te.current,p=pt(s).activeElement;if(p.getAttribute("role")!=="tab")return;let y=M==="horizontal"?"ArrowLeft":"ArrowUp",B=M==="horizontal"?"ArrowRight":"ArrowDown";switch(M==="horizontal"&&u&&(y="ArrowRight",B="ArrowLeft"),r.key){case y:r.preventDefault(),ge(s,p,_e);break;case B:r.preventDefault(),ge(s,p,Xe);break;case"Home":r.preventDefault(),ge(s,null,Xe);break;case"End":r.preventDefault(),ge(s,null,_e);break}},ze=it();return o.jsxs(_t,f({className:U(V.root,g),ownerState:Q,ref:a,as:S},ke,{children:[ze.scrollButtonStart,ze.scrollbarSizeListener,o.jsxs(Kt,{className:V.scroller,ownerState:Q,style:{overflow:Le.overflow,[l?`margin${u?"Left":"Right"}`:"marginBottom"]:de?void 0:-Le.scrollbarWidth},ref:O,children:[o.jsx(Vt,{"aria-label":x,"aria-labelledby":m,"aria-orientation":M==="vertical"?"vertical":null,className:V.flexContainer,ownerState:Q,onKeyDown:dt,ref:te,role:"tablist",children:ct}),Ee&&He]}),ze.scrollButtonEnd]}))}),lo=()=>{const[e,t]=n.useState(0),[a,c]=n.useState([]),[d,u]=n.useState([]),[x,m]=n.useState(null),[b,C]=n.useState([]),[w,g]=n.useState({plan:"PRO",stripePriceId:""}),[S,T]=n.useState(""),[F,W]=n.useState([]),[M,H]=n.useState([]),[j,R]=n.useState({od:"",do:"",userId:"",waluta:"",metoda:"",kategoriaId:"",kwotaMin:"",kwotaMax:"",szukaj:""}),[L,X]=n.useState({poziom:"",zawiera:""}),{user:_}=bt();if(_?.rola!=="ADMIN")return o.jsxs(Te,{children:[o.jsx(G,{variant:"h2",mb:2,children:"Admin"}),o.jsx(G,{children:"Brak uprawnień do panelu admina."})]});const k=async()=>{const[l,i,ne,ie,ue,J]=await Promise.all([E.get("/admin/users"),E.get("/admin/transactions",{params:j}),E.get("/admin/reports/global/detailed"),E.get("/admin/categories"),E.get("/admin/subscriptions"),E.get("/admin/logs",{params:L})]);c(l.data),u(i.data),m(ne.data),C(ie.data),H(ue.data),W(J.data)};n.useEffect(()=>{k()},[]);const se=n.useMemo(()=>[{field:"email",headerName:"E-mail",flex:1},{field:"rola",headerName:"Rola",flex:.7,renderCell:l=>o.jsxs(z,{select:!0,size:"small",value:l.row.rola,onChange:i=>E.patch(`/admin/users/${l.row.id}/role`,{rola:i.target.value}).then(k),children:[o.jsx(D,{value:"ADMIN",children:"ADMIN"}),o.jsx(D,{value:"USER",children:"USER"}),o.jsx(D,{value:"VIEWER",children:"VIEWER"})]})},{field:"zablokowany",headerName:"Zablokowany",flex:.7,renderCell:l=>o.jsx(Bt,{checked:!!l.row.zablokowany,onChange:i=>E.patch(`/admin/users/${l.row.id}/${i.target.checked?"block":"unblock"}`).then(k)})},{field:"actions",headerName:"Akcje",flex:1.2,renderCell:l=>o.jsxs(Te,{sx:{display:"flex",gap:1},children:[o.jsx(oe,{size:"small",variant:"outlined",onClick:()=>E.patch(`/admin/users/${l.row.id}/block`).then(k),children:"Zablokuj"}),o.jsx(oe,{size:"small",variant:"outlined",onClick:()=>E.patch(`/admin/users/${l.row.id}/unblock`).then(k),children:"Odblokuj"})]})}],[]),K=n.useMemo(()=>[{field:"data",headerName:"Data",flex:1},{field:"kwota",headerName:"Kwota",flex:1},{field:"odbiorca",headerName:"Odbiorca",flex:1.2},{field:"waluta",headerName:"Waluta",flex:.6},{field:"metoda",headerName:"Metoda",flex:.8},{field:"email",headerName:"Użytkownik",flex:1.2}],[]),$=n.useMemo(()=>[{field:"email",headerName:"Użytkownik",flex:1.2},{field:"plan",headerName:"Plan",flex:.7},{field:"status",headerName:"Status",flex:.8},{field:"currentPeriodEnd",headerName:"Następne rozliczenie",flex:1}],[]),de=n.useMemo(()=>[{field:"poziom",headerName:"Poziom",flex:.6},{field:"wiadomosc",headerName:"Wiadomość",flex:2},{field:"utworzono",headerName:"Czas",flex:1}],[]),ke=d.map(l=>({...l,email:l.uzytkownik?.email})),N=M.map(l=>({...l,email:l.uzytkownik?.email,currentPeriodEnd:l.currentPeriodEnd?.slice(0,10)??"—"}));return o.jsxs(Te,{children:[o.jsx(G,{variant:"h2",mb:2,children:"Admin"}),o.jsxs(qt,{value:e,onChange:(l,i)=>t(i),sx:{mb:2},children:[o.jsx(ae,{label:"Użytkownicy"}),o.jsx(ae,{label:"Transakcje"}),o.jsx(ae,{label:"Subskrypcje"}),o.jsx(ae,{label:"Kategorie globalne"}),o.jsx(ae,{label:"Plany Stripe"}),o.jsx(ae,{label:"Logi systemowe"}),o.jsx(ae,{label:"Raporty"})]}),e===0&&o.jsx(le,{children:o.jsx(re,{children:o.jsx("div",{style:{height:520},children:o.jsx(be,{rows:a,columns:se})})})}),e===1&&o.jsx(le,{children:o.jsxs(re,{children:[o.jsxs(v,{container:!0,spacing:2,mb:2,children:[o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Data od",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:j.od,onChange:l=>R(i=>({...i,od:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Data do",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:j.do,onChange:l=>R(i=>({...i,do:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:3,children:o.jsx(z,{label:"UserId",fullWidth:!0,value:j.userId,onChange:l=>R(i=>({...i,userId:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsxs(z,{select:!0,label:"Waluta",fullWidth:!0,value:j.waluta,onChange:l=>R(i=>({...i,waluta:l.target.value})),children:[o.jsx(D,{value:"",children:"Wszystkie"}),["PLN","EUR","USD","GBP"].map(l=>o.jsx(D,{value:l,children:l},l))]})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsxs(z,{select:!0,label:"Metoda",fullWidth:!0,value:j.metoda,onChange:l=>R(i=>({...i,metoda:l.target.value})),children:[o.jsx(D,{value:"",children:"Wszystkie"}),[{id:"karta",label:"Karta"},{id:"przelew",label:"Przelew"},{id:"gotowka",label:"Gotówka"},{id:"blikiem",label:"BLIK"}].map(l=>o.jsx(D,{value:l.id,children:l.label},l.id))]})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Kategoria ID",fullWidth:!0,value:j.kategoriaId,onChange:l=>R(i=>({...i,kategoriaId:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Kwota min",type:"number",fullWidth:!0,value:j.kwotaMin,onChange:l=>R(i=>({...i,kwotaMin:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Kwota max",type:"number",fullWidth:!0,value:j.kwotaMax,onChange:l=>R(i=>({...i,kwotaMax:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(z,{label:"Szukaj",fullWidth:!0,value:j.szukaj,onChange:l=>R(i=>({...i,szukaj:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:2,children:o.jsx(oe,{variant:"contained",fullWidth:!0,onClick:k,children:"Filtruj"})})]}),o.jsx("div",{style:{height:520},children:o.jsx(be,{rows:ke,columns:K})})]})}),e===2&&o.jsx(le,{children:o.jsx(re,{children:o.jsx("div",{style:{height:520},children:o.jsx(be,{rows:N,columns:$})})})}),e===3&&o.jsx(le,{children:o.jsxs(re,{children:[o.jsxs(v,{container:!0,spacing:2,mb:2,children:[o.jsx(v,{item:!0,xs:12,md:6,children:o.jsx(z,{label:"Nowa kategoria globalna",fullWidth:!0,value:S,onChange:l=>T(l.target.value)})}),o.jsx(v,{item:!0,xs:12,md:3,children:o.jsx(oe,{variant:"contained",fullWidth:!0,onClick:()=>E.post("/admin/categories",{nazwa:S}).then(()=>T("")).then(k),children:"Dodaj kategorię"})})]}),o.jsx("div",{style:{height:520},children:o.jsx(be,{rows:b,columns:[{field:"nazwa",headerName:"Nazwa",flex:1},{field:"akcje",headerName:"Akcje",flex:.6,renderCell:l=>o.jsx(oe,{size:"small",color:"error",onClick:()=>E.post(`/admin/categories/${l.row.id}/delete`).then(k),children:"Usuń"})}]})})]})}),e===4&&o.jsx(le,{children:o.jsxs(re,{children:[o.jsxs(v,{container:!0,spacing:2,mb:2,children:[o.jsx(v,{item:!0,xs:12,md:3,children:o.jsxs(z,{select:!0,label:"Plan",fullWidth:!0,value:w.plan,onChange:l=>g(i=>({...i,plan:l.target.value})),children:[o.jsx(D,{value:"FREE",children:"Free"}),o.jsx(D,{value:"PRO",children:"Pro"})]})}),o.jsx(v,{item:!0,xs:12,md:6,children:o.jsx(z,{label:"Stripe Price ID",fullWidth:!0,value:w.stripePriceId,onChange:l=>g(i=>({...i,stripePriceId:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:3,children:o.jsx(oe,{variant:"contained",fullWidth:!0,onClick:()=>E.post("/admin/plans",w).then(()=>g({plan:"PRO",stripePriceId:""})),children:"Zapisz mapowanie"})})]}),o.jsx(G,{variant:"body2",color:"text.secondary",children:"Mapowanie planów jest wymagane do Stripe Billing."})]})}),e===5&&o.jsx(le,{children:o.jsxs(re,{children:[o.jsxs(v,{container:!0,spacing:2,mb:2,children:[o.jsx(v,{item:!0,xs:12,md:3,children:o.jsx(z,{label:"Poziom",fullWidth:!0,value:L.poziom,onChange:l=>X(i=>({...i,poziom:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:6,children:o.jsx(z,{label:"Zawiera",fullWidth:!0,value:L.zawiera,onChange:l=>X(i=>({...i,zawiera:l.target.value}))})}),o.jsx(v,{item:!0,xs:12,md:3,children:o.jsx(oe,{variant:"contained",fullWidth:!0,onClick:k,children:"Filtruj logi"})})]}),o.jsx("div",{style:{height:520},children:o.jsx(be,{rows:F,columns:de})})]})}),e===6&&o.jsx(le,{children:o.jsxs(re,{children:[o.jsx(G,{variant:"h3",children:"Trend 12 miesięcy"}),x?.byMonth?.map(l=>o.jsxs(G,{variant:"body2",children:[l.miesiac,": ",l.suma]},l.miesiac)),o.jsx(G,{variant:"h3",mt:2,children:"Top użytkownicy"}),x?.topUsers?.map(l=>o.jsxs(G,{variant:"body2",children:[l.email,": ",l.liczbaTransakcji," transakcji, suma ",l.suma]},l.userId))]})})]})};export{lo as Admin};
