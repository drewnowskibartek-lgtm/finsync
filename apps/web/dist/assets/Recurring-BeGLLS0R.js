import{r as d,u as C,j as e,B as j,T as r,C as m,b as p,c as o,d as f,S as k,h as b}from"./index-BWONGnEN.js";import{u as z}from"./useSubscription-ClKgoe6k.js";import{G as s}from"./Grid-BBssZsKo.js";import{M as c}from"./MenuItem-DJikRv8z.js";const S=()=>{const[g,v]=d.useState([]),{data:l}=z(),{user:u}=C(),w=l?.plan==="PRO",h=u?.rola==="ADMIN"||u?.rola==="USER",[n,i]=d.useState({odbiorca:"",kwota:0,czestotliwosc:"MIESIECZNA",nastepnaData:""}),x=async()=>{const a=await b.get("/recurring");v(a.data)};d.useEffect(()=>{l?.plan==="PRO"&&x()},[l?.plan]);const y=async()=>{await b.post("/recurring",n),x()};return w?e.jsxs(j,{children:[e.jsx(r,{variant:"h2",mb:2,children:"Cykliczne"}),e.jsx(m,{sx:{mb:2},children:e.jsx(p,{children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,md:3,children:e.jsx(o,{label:"Odbiorca",fullWidth:!0,value:n.odbiorca,onChange:a=>i(t=>({...t,odbiorca:a.target.value}))})}),e.jsx(s,{item:!0,xs:12,md:2,children:e.jsx(o,{label:"Kwota",type:"number",fullWidth:!0,value:n.kwota,onChange:a=>i(t=>({...t,kwota:Number(a.target.value)}))})}),e.jsx(s,{item:!0,xs:12,md:3,children:e.jsxs(o,{select:!0,label:"Częstotliwość",fullWidth:!0,value:n.czestotliwosc,onChange:a=>i(t=>({...t,czestotliwosc:a.target.value})),children:[e.jsx(c,{value:"DZIENNA",children:"Dzienna"}),e.jsx(c,{value:"TYGODNIOWA",children:"Tygodniowa"}),e.jsx(c,{value:"MIESIECZNA",children:"Miesięczna"}),e.jsx(c,{value:"ROCZNA",children:"Roczna"})]})}),e.jsx(s,{item:!0,xs:12,md:2,children:e.jsx(o,{label:"Następna data",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:n.nastepnaData,onChange:a=>i(t=>({...t,nastepnaData:a.target.value}))})}),e.jsx(s,{item:!0,xs:12,md:2,children:e.jsx(f,{variant:"contained",fullWidth:!0,onClick:y,sx:{height:"100%"},disabled:!h,children:"Dodaj"})})]})})}),e.jsx(k,{spacing:1,children:g.map(a=>e.jsx(m,{children:e.jsx(p,{children:e.jsxs(r,{variant:"body1",children:[a.odbiorca," — ",a.kwota," PLN — ",a.czestotliwosc," — następna:"," ",a.nastepnaData?.slice(0,10)]})})},a.id))}),!h&&e.jsx(r,{variant:"body2",color:"text.secondary",mt:2,children:"Konto Viewer nie może dodawać cyklicznych transakcji."})]}):e.jsxs(j,{children:[e.jsx(r,{variant:"h2",mb:2,children:"Cykliczne"}),e.jsx(r,{children:"Funkcja dostępna tylko w planie Pro."})]})};export{S as Recurring};
